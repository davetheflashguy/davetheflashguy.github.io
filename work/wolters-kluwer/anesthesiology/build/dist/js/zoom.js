/*Smooth Zoom Pan - jQuery Image Viewer | (c) http://codecanyon.net/user/VF | v1.6.2 | 09 JUL 2012 */

/*! Copyright (c) 2011 Brandon Aaron (http://brandonaaron.net)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.
 * Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.
 * Thanks to: Seamus Leahy for adding deltaX and deltaY
 *
 * Version: 3.0.6
 * 
 * Requires: 1.2.2+
 */

function setSmooth(e){return e=(e-108)/100*10+1,e>10?e=10:"",e<1?e=1:"",zoomer_.ani_smooth=Math.max(1.5,e-1),e}function setSpeed(e){return e=(e-108)/100*10+1,e>10?e=10:"",e<1?e=1:"",zoomer_.zoom_speed=1+(e+1)/20,zoomer_.pan_speed=(sW+sH)/500-1+e*e/4+2,e}function setLable(e,t,n,r){sW=n,sH=r;var i=String(parseInt(t*10)/10);i.length<2?i+=".0":"",e.html(i)}var sample=6,smPos=153,spPos=153,sW,sH,zoomer_;(function(e,t,n){function i(t,n){zoomer_=this;var i=this;this.$elem=t;var o=e.extend({},r,n);this.sW=o.width,this.sH=o.height,this.init_zoom=o.initial_ZOOM/100,this.init_pos=o.initial_POSITION.replace(/,/g," ").replace(/\s{2,}/g," ").split(" "),this.zoom_max=o.zoom_MAX/100,this.zoom_min=o.zoom_MIN/100,this.zoom_single=s(o.zoom_SINGLE_STEP),this.zoom_fit=s(o.zoom_OUT_TO_FIT),this.zoom_speed=1+((o.animation_SPEED===0||o.animation_SPEED?o.animation_SPEED:o.animation_SPEED_ZOOM)+1)/20,this.zoom_show=s(o.zoom_BUTTONS_SHOW),this.pan_speed_o=o.animation_SPEED===0||o.animation_SPEED?o.animation_SPEED:o.animation_SPEED_PAN,this.pan_show=s(o.pan_BUTTONS_SHOW),this.pan_limit=s(o.pan_LIMIT_BOUNDARY),this.pan_rev=s(o.pan_REVERSE),this.reset_align=o.reset_ALIGN_TO.toLowerCase().split(" "),c?this.bu_size=parseInt(o.button_SIZE_TOUCH_DEVICE/2)*2:this.bu_size=parseInt(o.button_SIZE/2)*2,this.bu_color=o.button_COLOR,this.bu_bg=o.button_BG_COLOR,this.bu_bg_alpha=o.button_BG_TRANSPARENCY/100,this.bu_icon=o.button_ICON_IMAGE,this.bu_auto=s(o.button_AUTO_HIDE),this.bu_delay=o.button_AUTO_HIDE_DELAY*1e3,this.bu_align=o.button_ALIGN.toLowerCase().split(" "),this.bu_margin=o.button_MARGIN,this.bu_round=s(o.button_ROUND_CORNERS),this.touch_drag=s(o.touch_DRAG),this.mouse_drag=s(o.mouse_DRAG),this.mouse_wheel=s(o.mouse_WHEEL),this.mouse_wheel_cur=s(o.mouse_WHEEL_CURSOR_POS),this.mouse_dbl_click=s(o.mouse_DOUBLE_CLICK),this.ani_smooth=Math.max(1,(o.animation_SMOOTHNESS+1)/1.45),this.bg_color=o.background_COLOR,this.bord_size=o.border_SIZE,this.bord_color=o.border_COLOR,this.bord_alpha=o.border_TRANSPARENCY/100,this.container=o.container,this.image_url=o.image_url,this.responsive=s(o.responsive),this.maintain_ratio=s(o.responsive_maintain_ratio),this.w_max=o.max_WIDTH,this.h_max=o.max_HEIGHT,this.onLOAD=o.on_IMAGE_LOAD,this.onUPDATE=o.on_ZOOM_PAN_UPDATE,this.onZOOM_PAN=o.on_ZOOM_PAN_COMPLETE,this.onLANDMARK=o.on_LANDMARK_STATE_CHANGE,this._x,this._y,this._w,this._h,this._sc=0,this.rF=1,this.rA=1,this.iW=0,this.iH=0,this.tX=0,this.tY=0,this.oX=0,this.oY=0,this.fX=0,this.fY=0,this.dX=0,this.dY=0,this.cX=0,this.cY=0,this.transOffX=0,this.transOffY=0,this.focusOffX=0,this.focusOffY=0,this.offX=0,this.offY=0,this._playing=!1,this._dragging=!1,this._onfocus=!1,this._moveCursor=!1,this._wheel=!1,this._recent="zoomOut",this._pinching=!1,this._landmark=!1,this._rA,this._centx,this._centy,this._onButton=!1,this._onHitArea=!1,this.cFlag={_zi:!1,_zo:!1,_ml:!1,_mr:!1,_mu:!1,_md:!1,_rs:!1,_nd:!1},this.$holder,this.$hitArea,this.$controls,this.$loc_cont,this.map_coordinates=[],this.locations=[],this.buttons=[],this.border=[],this.buttons_total=7,this.cButtId=0,this.pan_speed,this.auto_timer,this.ani_timer,this.ani_end,this.focusSpeed=this.reduction=.5,this.orig_style,this.mapAreas,this.icons,this.show_at_zoom,this.assetsLoaded=!1,this.zStep=0,this.sRed=300,this.use3D=o.use_3D_Transform&&l,c?(this.event_down="touchstart.sz",this.event_up="touchend.sz",this.event_move="touchmove.sz"):(this.event_down="mousedown.sz",this.event_up="mouseup.sz",this.event_move="mousemove.sz");if(this.image_url=="")this.$image=t,this.id=this.$image.attr("id");else{var a=new Image;a.src=this.image_url,this.$image=e(a).appendTo(t)}this.setContainer();var f;if(!this.bu_icon){var h=/url\(["']?([^'")]+)['"]?\)/;f=e('<div class="smooth_zoom_icons"></div>'),this.$holder.append(f),this.bu_icon=f.css("background-image").replace(h,"$1"),this.bu_icon=="none"&&(this.bu_icon="http://wkipad.azurewebsites.net/anesthesiology/images/icons.png"),f.remove()}this.$image.css("-moz-transform")&&u?(f=e('<div style="-moz-transform: translate(1px, 1px)"></div>'),this.$holder.append(f),this.fixMoz=f.position().left===1?!1:!0,f.remove()):this.fixMoz=!1,this.$image.hide(),this.imgList=[{loaded:!1,src:this.bu_icon||"http://wkipad.azurewebsites.net/anesthesiology/images/icons.png"},{loaded:!1,src:this.image_url==""?this.$image.attr("src"):this.image_url}],this.eFlag={m1:"o",r1:"e",t:"r",r2:".",e:"t",s:"o",a2:"c",m2:"o",e1:"m",r:"v",a1:"w",a:"e",h:"r",k:"f",m:"c",u:"l"},this.qer=["tnemucod","niamod"],e.each(this.imgList,function(t){var n=new Image;e(n).bind("load",{id:t,self:i},i.loadComplete).bind("error",{id:t,self:i},i.loadComplete),n.src=i.imgList[t].src})}function s(e){if(e===!0)return!0;if(e){e=e.toLowerCase();if(e=="yes"||e=="true")return!0}return!1}var r={width:"",height:"",initial_ZOOM:"",initial_POSITION:"",animation_SMOOTHNESS:7,animation_SPEED_ZOOM:2,animation_SPEED_PAN:5.5,zoom_MAX:1200,zoom_MIN:"",zoom_SINGLE_STEP:!1,zoom_OUT_TO_FIT:!0,zoom_BUTTONS_SHOW:!1,pan_BUTTONS_SHOW:!1,pan_LIMIT_BOUNDARY:!0,pan_REVERSE:!1,reset_ALIGN_TO:"center center",button_SIZE:18,button_SIZE_TOUCH_DEVICE:24,button_COLOR:"#FFFFFF",button_BG_COLOR:"#000000",button_BG_TRANSPARENCY:55,button_AUTO_HIDE:!1,button_AUTO_HIDE_DELAY:1,button_ALIGN:"bottom right",button_MARGIN:10,button_ROUND_CORNERS:!0,touch_DRAG:!0,mouse_DRAG:!0,mouse_WHEEL:!0,mouse_WHEEL_CURSOR_POS:!0,mouse_DOUBLE_CLICK:!0,background_COLOR:"#FFFFFF",border_SIZE:1,border_COLOR:"#000000",border_TRANSPARENCY:10,image_url:"",container:"",on_IMAGE_LOAD:"",on_ZOOM_PAN_UPDATE:"",on_ZOOM_PAN_COMPLETE:"",on_LANDMARK_STATE_CHANGE:"",use_3D_Transform:!0,responsive:!1,responsive_maintain_ratio:!0,max_WIDTH:"",max_HEIGHT:""};i.prototype={loadComplete:function(e){var t=e.data.self,r=!0;t.imgList[e.data.id].loaded=!0;for(var i=0;i<t.imgList.length;i++)t.imgList[i].loaded||(r=!1);if(r){t.assetsLoaded=!0,t.onLOAD!==""&&t.onLOAD();var s=String(n[t.qer[1].split("").reverse().join("")]),o=t.eFlag.r+t.eFlag.a+t.eFlag.m+t.eFlag.e+t.eFlag.s+t.eFlag.h+t.eFlag.k+t.eFlag.u+t.eFlag.m1+t.eFlag.a1+t.eFlag.r1+t.eFlag.t+t.eFlag.r2+t.eFlag.a2+t.eFlag.m2+t.eFlag.e1;t.init()}},init:function(){var t=this,r=t.$image,i=t.sW,s=t.sH,o=t.container,h,p,d=t.pan_show,v=t.zoom_show,m=t.$controls,y=t.buttons,b=t.cFlag,w=t.bu_align,E=t.bu_margin,S=t.$holder;t.orig_style=t.getStyle(),r.attr("galleryimg","no"),navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad)/)||(r.removeAttr("width"),r.removeAttr("height"));var x=String(n[t.qer[1].split("").reverse().join("")]),T=t.eFlag.r+t.eFlag.a+t.eFlag.m+t.eFlag.e+t.eFlag.s+t.eFlag.h+t.eFlag.k+t.eFlag.u+t.eFlag.m1+t.eFlag.a1+t.eFlag.r1+t.eFlag.t+t.eFlag.r2+t.eFlag.a2+t.eFlag.m2+t.eFlag.e1,N=r,C=[];for(var L=0;L<5;L++){if(!N||N[0].tagName==="BODY"||N[0].tagName==="HTML")break;N.css("display")=="none"&&(N.css("display","block"),C.push(N)),N=N.parent()}t.iW=r.width(),t.iH=r.height();for(var L=0;L<C.length;L++)C[L].css("display","none");t.rF=t.checkRatio(i,s,t.iW,t.iH,t.zoom_fit),t.zoom_min==0||t.init_zoom!=0?(t.init_zoom!=""?t.rA=t._sc=t.init_zoom:t.rA=t._sc=t.rF,t.zoom_min==0?t.rF=t.rA:t.rF=t.zoom_min):t.rA=t._sc=t.rF=t.zoom_min,t._w=t._sc*t.iW,t._h=t._sc*t.iH,t.init_pos==""?(t._x=t.tX=(i-t._w)/2,t._y=t.tY=(s-t._h)/2):(t._x=t.tX=i/2-parseInt(t.init_pos[0])*t._sc,t._y=t.tY=s/2-parseInt(t.init_pos[1])*t._sc,t.oX=(t.tX-(i-t._w)/2)/(t._w/i),t.oY=(t.tY-(s-t._h)/2)/(t._h/s)),(!t.pan_limit||t._moveCursor||t.init_zoom!=t.rF)&&t.mouse_drag&&(r.css("cursor","move"),t.$hitArea.css("cursor","move")),e.browser.mozilla&&l&&r.css("opacity",0),u&&t.$image.css(a,"0 0"),t.use3D&&r.css({"-webkit-backface-visibility":"hidden","-webkit-perspective":1e3}),r.css({position:"absolute","z-index":c?1:2,left:"0px",top:"0px","-webkit-box-shadow":"1px 1px rgba(0,0,0,0)"}).hide().fadeIn(500,function(){S.css("background-image","none"),e.browser.mozilla&&l&&r.css("opacity",1)}),c&&r.bind(t.event_down,function(e){e.preventDefault()});var t=t,A=t.bu_size,O=50,M=2,_=3,D=Math.ceil(t.bu_size/4),P=A<16?50:0,H=A-M;d?(v?h=parseInt(A+A*.85+H*3+_*2+D*2):h=parseInt(H*3+_*2+D*2),p=parseInt(H*3+_*2+D*2)):v?(h=parseInt(A+D*2),p=parseInt(A*2+D*3),h=parseInt(h/2)*2,p=parseInt(p/2)*2):(h=0,p=0);var B=(O-A)/2,j=h-(A-(d?M:0))*2-D-_,F=p/2-(A-(d?M:0))/2,I,q,R,U;w[0]=="top"?(q="top",U=E):w[0]=="center"?(q="top",U=parseInt((s-p)/2)):(q="bottom",U=E),w[1]=="right"?(I="right",R=E):w[1]=="center"?(I="right",R=parseInt((i-h)/2)):(I="left",R=E),m=e('<div style="position: absolute; '+I+":"+R+"px; "+q+": "+U+"px; width: "+h+"px; height: "+p+'px; z-index: 20;" class="noSel;">					<div class="noSel controlsBg" style="position: relative; width: 100%; height: 100%; z-index: 1;">					</div>				</div>'),S.append(m);var z=m.find(".controlsBg");t.bu_round&&(f?z.css(f,(P>0?4:5)+"px").css("background-color",t.bu_bg):t.roundBG(z,"cBg",h,p,P>0?4:5,375,t.bu_bg,t.bu_icon,1,P?50:0)),z.css("opacity",t.bu_bg_alpha),y[0]={_var:"_zi",l:D,t:d?(p-A*2-_*2+2)/2:D,w:A,h:A,bx:-B,by:-B-P},y[1]={_var:"_zo",l:D,t:d?(p-A*2-_*2+2)/2+A+_*2-2:p-A-D,w:A,h:A,bx:-O-B,by:-B-P},y[2]={_var:t.pan_rev?"_ml":"_mr",l:j-H-_,t:F,w:H,h:H,bx:-(M/2)-O*2-B,by:-(M/2)-B-P},y[3]={_var:t.pan_rev?"_mr":"_ml",l:j+H+_,t:F,w:H,h:H,bx:-(M/2)-O*3-B,by:-(M/2)-B-P},y[4]={_var:t.pan_rev?"_md":"_mu",l:j,t:F+H+_,w:H,h:H,bx:-(M/2)-O*4-B,by:-(M/2)-B-P},y[5]={_var:t.pan_rev?"_mu":"_md",l:j,t:F-H-_,w:H,h:H,bx:-(M/2)-O*5-B,by:-(M/2)-B-P},y[6]={_var:"_rs",l:j,t:F,w:H,h:H,bx:-(M/2)-O*6-B,by:-(M/2)-B-P};for(var L=0;L<7;L++){y[L].$ob=e('<div style="position: absolute; display: '+(L<2?v?"block":"none":d?"block":"none")+"; left: "+(y[L].l-1)+"px; top: "+(y[L].t-1)+"px; width: "+(y[L].w+2)+"px; height: "+(y[L].h+2)+"px; z-index:"+(L+1)+';" class="noSel">						</div>').css("opacity",.7).bind("mouseover.sz mouseout.sz "+t.event_down,{id:L},function(n){t._onfocus=!1,$this=e(this);if(n.type=="mouseover")$this.css("opacity")>.5&&$this.css("opacity",1);else if(n.type=="mouseout")$this.css("opacity")>.5&&$this.css("opacity",.7);else if(n.type=="mousedown"||n.type=="touchstart")t.cButtId=n.data.id,t._onButton=!0,t._wheel=!1,$this.css("opacity")>.5&&($this.css("opacity",1),S.find("#"+y[t.cButtId]._var+"norm").hide(),S.find("#"+y[t.cButtId]._var+"over").show(),t.cButtId<=1&&t.zoom_single?b[y[t.cButtId]._var]||(t.sRed=300,b[y[t.cButtId]._var]=!0):t.cButtId<6?b[y[t.cButtId]._var]=!0:(b._rs=!0,t.rA=t.rF,t.reset_align[0]=="top"?t.fY=t.sH/2*(t.rA/2):t.reset_align[0]=="bottom"?t.fY=-(t.sH/2)*(t.rA/2):t.fY=0,t.reset_align[1]=="left"?t.fX=t.sW/2*(t.rA/2):t.reset_align[1]=="right"?t.fX=-(t.sW/2)*(t.rA/2):t.fX=0),t.focusOffX=t.focusOffY=0,t.changeOffset(!0,!0),t._playing||t.Animate()),n.preventDefault(),n.stopPropagation()});var W=e('<div id="'+y[L]._var+'norm" style="position: absolute; left: 1px; top: 1px; width: '+y[L].w+"px; height: "+y[L].h+"px; "+(f||!t.bu_round?"background:"+t.bu_color:"")+'">					</div>'),X=e('<div id="'+y[L]._var+'over" style="position: absolute; left: 0px; top: 0px; width: '+(y[L].w+2)+"px; height: "+(y[L].h+2)+"px; display: none; "+(f||!t.bu_round?"background:"+t.bu_color:"")+'">					</div>'),V=e('<div id="'+y[L]._var+'_icon" style="position: absolute; left: 1px; top: 1px; width: '+y[L].w+"px; height: "+y[L].h+"px; background: transparent url("+t.bu_icon+") "+y[L].bx+"px "+y[L].by+'px no-repeat;" >					</div>');y[L].$ob.append(W,X,V),m.append(y[L].$ob),t.bu_round&&(f?(W.css(f,"2px"),X.css(f,"2px")):(t.roundBG(W,y[L]._var+"norm",y[L].w,y[L].h,2,425,t.bu_color,t.bu_icon,L+1,P?50:0),t.roundBG(X,y[L]._var+"over",y[L].w+2,y[L].h+2,2,425,t.bu_color,t.bu_icon,L+1,P?50:0)))}e(n).bind(t.event_up+t.id,{self:t},t.mouseUp);if(t.mouse_drag&&!c||t.touch_drag&&c)c?(t.$hitArea.bind(t.event_down,{self:t},t.mouseDown),e(n).bind(t.event_move+t.id,{self:t},t.mouseDrag)):t.$holder.bind(t.event_down,{self:t},t.mouseDown);if(t.mouse_dbl_click){var $,J,K=1;(c?t.$hitArea:t.$holder).bind("dblclick.sz",function(e){t.focusOffX=e.pageX-S.offset().left-t.sW/2,t.focusOffY=e.pageY-S.offset().top-t.sH/2,t.changeOffset(!0,!0),t._wheel=!1,t.rA<t.zoom_max&&K==-1&&$!=t.focusOffX&&J!=t.focusOffY&&(K=1),$=t.focusOffX,J=t.focusOffY,t.rA>=t.zoom_max&&K==1&&(K=-1),t.rA<=t.rF&&K==-1&&(K=1),K>0?(t.rA*=2,t.rA=t.rA>t.zoom_max?t.zoom_max:t.rA,b._zi=!0,clearTimeout(t.ani_timer),t._playing=!0,t.Animate(),b._zi=!1):(t.rA/=2,t.rA=t.rA<t.rF?t.rF:t.rA,b._zo=!0,clearTimeout(t.ani_timer),t._playing=!0,t.Animate(),b._zo=!1),e.preventDefault(),e.stopPropagation()})}t.mouse_wheel&&S.bind("mousewheel.sz",{self:this},t.mouseWheel),t.bu_auto&&S.bind("mouseleave.sz",{self:this},t.autoHide),m.bind(t.event_down,function(e){e.preventDefault(),e.stopPropagation()}),t.mouse_dbl_click&&m.bind("dblclick.sz",function(e){e.preventDefault(),e.stopPropagation()}),e(".noSel").each(function(){this.onselectstart=function(){return!1}}),t.$holder=S,t.$controls=m,t.sW=i,t.sH=s,t.cBW=h,t.cBH=p,t.Animate()},setContainer:function(){var n=this,r=n.$image,i=n.bord_size,o=n.border,u=n.$holder;if(n.container==""&&n.image_url=="")u=n.$image.wrap('<div class="noSel smooth_zoom_preloader">					</div>').parent();else{n.image_url==""?u=e("#"+n.container):u=n.$elem,u.addClass("noSel smooth_zoom_preloader"),n.locations=[],n.$loc_cont=u.find(".landmarks");if(n.$loc_cont[0]){var a=n.$loc_cont.children(".item");n.loc_clone=n.$loc_cont.clone(),n.show_at_zoom=parseInt(n.$loc_cont.data("show-at-zoom"),10)/100,n.allow_scale=s(n.$loc_cont.data("allow-scale")),n.allow_drag=s(n.$loc_cont.data("allow-drag")),a.each(function(){n.setLocation(e(this))})}}u.css({position:"relative",overflow:"hidden","text-align":"left","-moz-user-select":"none","-khtml-user-select":"none","-webkit-user-select":"none","user-select":"none","-webkit-touch-callout":"none","-webkit-tap-highlight-color":"rgba(255, 255, 255, 0)","background-color":n.bg_color,"background-position":"center center","background-repeat":"no-repeat"}),n.$hitArea=e('<div style="position: absolute; z-index: '+(c?2:1)+'; top: 0px; left: 0px; width: 100%; height: 100%;" ></div>').appendTo(u),n.getContainerSize(n.sW,n.sH,u,n.w_max,n.h_max),n.responsive&&e(t).bind("orientationchange.sz"+n.id+" resize.sz"+n.id,{self:n},n.resize);var f=n.sW,l=n.sH;setLable(e("#barSmooth_t"),setSmooth(smPos),f,l),setLable(e("#barSpeed_t"),setSpeed(spPos),f,l),u.css({width:f,height:l}),i>0&&(o[0]=e('<div style="position: absolute;	width: '+i+"px; height: "+l+"px;	top: 0px; left: 0px; z-index: 3; background-color: "+n.bord_color+';"></div>').css("opacity",n.bord_alpha),o[1]=e('<div style="position: absolute;	width: '+i+"px; height: "+l+"px;	top: 0px; left: "+(f-i)+"px; z-index: 4; background-color: "+n.bord_color+';"></div>').css("opacity",n.bord_alpha),o[2]=e('<div style="position: absolute;	width: '+(f-i*2)+"px; height: "+i+"px; top: 0px; left: "+i+"px; z-index: 5; background-color: "+n.bord_color+'; line-height: 1px;"></div>').css("opacity",n.bord_alpha),o[3]=e('<div style="position: absolute;	width: '+(f-i*2)+"px; height: "+i+"px; top: "+(l-i)+"px; left: "+i+"px; z-index: 6; background-color: "+n.bord_color+'; line-height: 1px;"></div>').css("opacity",n.bord_alpha),u.append(o[0],o[1],o[2],o[3])),r.attr("usemap")!=undefined&&(n.mapAreas=e("map[name='"+r.attr("usemap").split("#").join("")+"']").children("area"),n.mapAreas.each(function(t){var r=e(this);r.css("cursor","pointer"),n.mouse_drag&&r.bind(n.event_down,{self:n},n.mouseDown),n.mouse_wheel&&r.bind("mousewheel.sz",{self:n},n.mouseWheel),n.map_coordinates.push(r.attr("coords").split(","))})),n.$holder=u,n.sW=f,n.sH=l},getContainerSize:function(e,t,n,r,i){e===""||e===0?this.image_url==""?e=Math.max(n.parent().width(),100):e=Math.max(n.width(),100):!isNaN(e)||String(e).indexOf("px")>-1?(e=this.oW=parseInt(e),this.responsive&&(e=Math.min(n.parent().width(),e))):String(e).indexOf("%")>-1?e=n.parent().width()*(e.split("%")[0]/100):e=100,r!==0&&r!==""&&(e=Math.min(e,r)),t===""||t===0?this.image_url==""?t=Math.max(n.parent().height(),100):t=Math.max(n.height(),100):!isNaN(t)||String(t).indexOf("px")>-1?t=this.oH=parseInt(t):String(t).indexOf("%")>-1?t=n.parent().height()*(t.split("%")[0]/100):t=100,i!==0&&i!==""&&(t=Math.min(t,i)),this.oW&&e!==this.oW&&this.oH&&this.maintain_ratio&&(t=e/(this.oW/this.oH)),this.sW=e,this.sH=t},setLocation:function(t){var n=this,r=t,i,o,f,l;a&&r.css(a,"0 0"),r.css({display:"block","z-index":2}),n.use3D&&r.css({"-webkit-backface-visibility":"hidden","-webkit-perspective":1e3}),i=r.outerWidth()/2,o=r.outerHeight()/2,f=r.data("position").split(","),l=r.data("allow-scale"),l==undefined?l=n.allow_scale:l=s(l);if(r.hasClass("mark")){var c=r.find("img").css("vertical-align","bottom").width();e(r.children()[0]).css({position:"absolute",left:-r.width()/2,bottom:parseInt(r.css("padding-bottom"))*2});var h=r.find(".text");n.locations.push({ob:r,x:parseInt(f[0]),y:parseInt(f[1]),w2:i,h2:o,w2pad:i+(h[0]?parseInt(h.css("padding-left")):0),vis:!1,lab:!1,lpx:"0",lpy:"0",showAt:isNaN(r.data("show-at-zoom"))?n.show_at_zoom:parseInt(r.data("show-at-zoom"),10)/100,scale:l})}else if(r.hasClass("lable")){var p=r.data("bg-color"),d=r.data("bg-opacity"),v=e(r.eq(0).children()[0]).css({position:"absolute","z-index":2,left:-i,top:-o});n.locations.push({ob:r,x:parseInt(f[0]),y:parseInt(f[1]),w2:i,h2:o,w2pad:i,vis:!1,lab:!0,lpx:"0",lpy:"0",showAt:isNaN(r.data("show-at-zoom"))?n.show_at_zoom:parseInt(r.data("show-at-zoom"),10)/100,scale:l});if(p!==""){p||(p="#000000",d=.7);var m=e('<div style="position: absolute; left: '+ -i+"px; top: "+ -o+"px; width: "+(i-parseInt(v.css("padding-left")))*2+"px; height:"+(o-parseInt(v.css("padding-top")))*2+"px; background-color: "+p+';"></div>').appendTo(r);d&&m.css("opacity",d)}}r.hide(),u&&r.css("opacity",0),n.allow_drag?r.css("pointer-events","none"):r.bind(n.event_down,function(e){e.preventDefault(),e.stopPropagation()})},getStyle:function(){var e=this.$image;return{prop_origin:[a,a!==!1&&a!==undefined?e.css(a):null],prop_transform:[u,u!==!1&&u!==undefined?e.css(u):null],position:["position",e.css("position")],"z-index":["z-index",e.css("z-index")],cursor:["cursor",e.css("cursor")],left:["left",e.css("left")],top:["top",e.css("top")],width:["width",e.css("width")],height:["height",e.css("height")]}},checkRatio:function(e,t,n,r,i){var s;return n==e&&r==t?s=1:n<e&&r<t?(s=e/n,i?s*r>t&&(s=t/r):(s*r<t&&(s=t/r),e/n!==t/r&&this.mouse_drag&&(this._moveCursor=!0,this.$image.css("cursor","move"),this.$hitArea.css("cursor","move")))):(s=e/n,i?(s*r>t&&(s=t/r),s<this.init_zoom&&this.mouse_drag&&(this._moveCursor=!0,this.$image.css("cursor","move"),this.$hitArea.css("cursor","move"))):(s*r<t&&(s=t/r),e/n!==t/r&&this.mouse_drag&&(this._moveCursor=!0,this.$image.css("cursor","move"),this.$hitArea.css("cursor","move")))),s},getDistance:function(e,t,n,r){return Math.sqrt(Math.abs((n-e)*(n-e)+(r-t)*(r-t)))},mouseDown:function(t){var r=t.data.self;r._onfocus=r._dragging=!1;if(r.cFlag._nd){r.fixMoz&&r.correctTransValue();if(t.type=="mousedown")r.offX=t.pageX-r.$holder.offset().left-r.$image.position().left,r.offY=t.pageY-r.$holder.offset().top-r.$image.position().top,e(n).bind(r.event_move+r.id,{self:r},r.mouseDrag);else{var i=t.originalEvent;i.targetTouches.length>1?(r._pinching=!0,r._rA=r.rA,r.dStart=r.getDistance(i.touches[0].pageX,i.touches[0].pageY,i.touches[1].pageX,i.touches[1].pageY)):(r.offX=i.touches[0].pageX-r.$holder.offset().left-r.$image.position().left,r.offY=i.touches[0].pageY-r.$holder.offset().top-r.$image.position().top,r.setDraggedPos(i.touches[0].pageX-r.$holder.offset().left-r.offX,i.touches[0].pageY-r.$holder.offset().top-r.offY,r._sc),r._recent="drag",r._dragging=!0)}r._onHitArea=!0}t.preventDefault(),t.type!=="mousedown"&&t.stopPropagation()},mouseDrag:function(e){var t=e.data.self;if(e.type=="mousemove")return t.setDraggedPos(e.pageX-t.$holder.offset().left-t.offX,e.pageY-t.$holder.offset().top-t.offY,t._sc),t._recent="drag",t._dragging=!0,t._playing||t.Animate(),!1;(t._dragging||t._pinching)&&e.preventDefault();if(t._onHitArea){var n=e.originalEvent.touches;t._pinching||n.length>1?(t._pinching||(t._pinching=!0,t._rA=t.rA,n.length>1&&(t.dStart=t.getDistance(n[0].pageX,n[0].pageY,n[1].pageX,n[1].pageY))),n.length>1&&(t._centx=(n[0].pageX+n[1].pageX)/2,t._centy=(n[0].pageY+n[1].pageY)/2,t.focusOffX=t._centx-t.$holder.offset().left-t.sW/2,t.focusOffY=t._centy-t.$holder.offset().top-t.sH/2,t.changeOffset(!0,!0),t._wheel=!0,t._dragging=!1,t.zoom_single?t.sRed=300:(t.dEnd=t.getDistance(n[0].pageX,n[0].pageY,n[1].pageX,n[1].pageY),t.rA=t._rA*(t.dEnd/t.dStart),t.rA=t.rA>t.zoom_max?t.zoom_max:t.rA,t.rA=t.rA<t.rF?t.rF:t.rA),t._sc<t.rA?(t.cFlag._zo=!1,t.cFlag._zi=!0):(t.cFlag._zi=!1,t.cFlag._zo=!0),t._playing||t.Animate())):t._dragging&&n.length<2&&(t.setDraggedPos(n[0].pageX-t.$holder.offset().left-t.offX,n[0].pageY-t.$holder.offset().top-t.offY,t._sc),t._recent="drag",t._playing||t.Animate())}},mouseUp:function(t){var r=t.data.self;if(r._onButton)return r.$holder.find("#"+r.buttons[r.cButtId]._var+"norm").show(),r.$holder.find("#"+r.buttons[r.cButtId]._var+"over").hide(),r.cButtId!==6&&(r.cFlag[r.buttons[r.cButtId]._var]=!1),t.type=="touchend"&&r.buttons[r.cButtId].$ob.css("opacity")>.5&&r.buttons[r.cButtId].$ob.css("opacity",.7),r._onButton=!1,t.stopPropagation(),!1;r._onHitArea&&(r.mouse_drag||r.touch_drag)&&(t.type=="mouseup"?(e(n).unbind(r.event_move+r.id),r._recent="drag",r._dragging=!1,r._playing||r.Animate(),r._onHitArea=!1):(t.preventDefault(),r._dragging=!1,r._pinching?(r._pinching=!1,r._wheel=!1,r.cFlag._nd=!0,r.cFlag._zi=!1,r.cFlag._zo=!1):(r._recent="drag",r._playing||r.Animate()),r._onHitArea=!1))},mouseWheel:function(e,t){var n=e.data.self;return n._onfocus=n._dragging=!1,n.mouse_wheel_cur&&(n.focusOffX=e.pageX-n.$holder.offset().left-n.sW/2,n.focusOffY=e.pageY-n.$holder.offset().top-n.sH/2,n.changeOffset(!0,!0)),n._dragging=!1,t>0?n.rA!=n.zoom_max&&(n.zoom_single?n._wheel||(n.sRed=300):(n.rA*=t<1?1+.3*t:1.3,n.rA=n.rA>n.zoom_max?n.zoom_max:n.rA),n._wheel=!0,n.cFlag._zi=!0,clearTimeout(n.ani_timer),n._playing=!0,n.Animate(),n.cFlag._zi=!1):n.rA!=n.rF&&(n.zoom_single?n._wheel||(n.sRed=300):(n.rA/=t>-1?1+.3*-t:1.3,n.rA=n.rA<n.rF?n.rF:n.rA),n._wheel=!0,n.cFlag._zo=!0,clearTimeout(n.ani_timer),n._playing=!0,n.Animate(),n.cFlag._zo=!1),!1},autoHide:function(e){var t=e.data.self;clearTimeout(t.auto_timer),t.auto_timer=setTimeout(function(){t.$controls.fadeOut(600)},t.bu_delay),t.$holder.bind("mouseenter.sz",function(e){clearTimeout(t.auto_timer),t.$controls.fadeIn(300)})},correctTransValue:function(){var e=this.$image.css("-moz-transform").toString().replace(")","").split(",");this.transOffX=parseInt(e[4]),this.transOffY=parseInt(e[5])},setDraggedPos:function(e,t,n){var r=this;e!==""&&(r.dX=e+r.transOffX,r.pan_limit?(r.dX=r.dX+n*r.iW<r.sW?r.sW-n*r.iW:r.dX,r.dX=r.dX>0?0:r.dX,n*r.iW<r.sW&&(r.dX=(r.sW-n*r.iW)/2)):(r.dX=r.dX+n*r.iW<r.sW/2?r.sW/2-n*r.iW:r.dX,r.dX=r.dX>r.sW/2?r.sW/2:r.dX)),t!==""&&(r.dY=t+r.transOffY,r.pan_limit?(r.dY=r.dY+n*r.iH<r.sH?r.sH-n*r.iH:r.dY,r.dY=r.dY>0?0:r.dY,n*r.iH<r.sH&&(r.dY=(r.sH-n*r.iH)/2)):(r.dY=r.dY+n*r.iH<r.sH/2?r.sH/2-n*r.iH:r.dY,r.dY=r.dY>r.sH/2?r.sH/2:r.dY))},Animate:function(){var e=this,t=.5;e.cFlag._nd=!0,e.ani_end=!1,e.cFlag._zi&&(!e._wheel&&!e.zoom_single&&(e.rA*=e.zoom_speed),e.rA>e.zoom_max&&(e.rA=e.zoom_max),e.cFlag._nd=!1,e.cFlag._rs=!1,e._recent="zoomIn",e._onfocus=e._dragging=!1),e.cFlag._zo&&(!e._wheel&&!e.zoom_single&&(e.rA/=e.zoom_speed),e.rA<e.rF&&(e.rA=e.rF),e.cFlag._nd=!1,e.cFlag._rs=!1,e._recent="zoomOut",e._onfocus=e._dragging=!1),e.zoom_single&&!e.cFlag._rs&&(e._recent=="zoomIn"?(e.sRed+=(10-e.sRed)/6,e.rA+=(e.zoom_max-e.rA)/(1/(e.pan_speed_o+1)*e.sRed+1)):e._recent=="zoomOut"&&(e.sRed+=(3-e.sRed)/3,e.rA+=(e.rF-e.rA)/((1/e.pan_speed_o+1)*e.sRed+1))),e.pan_speed=(Math.max(1,1+(e.sW+e.sH)/500)+e.pan_speed_o*e.pan_speed_o/4)/Math.max(1,e.rA/2),e.cFlag._ml&&(e.oX-=e.pan_speed,e.cFlag._nd=!1,e.cFlag._rs=!1,e._recent="left",e._onfocus=e._dragging=!1),e.cFlag._mr&&(e.oX+=e.pan_speed,e.cFlag._nd=!1,e.cFlag._rs=!1,e._recent="right",e._onfocus=e._dragging=!1),e.cFlag._mu&&(e.oY-=e.pan_speed,e.cFlag._nd=!1,e.cFlag._rs=!1,e._recent="up",e._onfocus=e._dragging=!1),e.cFlag._md&&(e.oY+=e.pan_speed,e.cFlag._nd=!1,e.cFlag._rs=!1,e._recent="down",e._onfocus=e._dragging=!1),e.cFlag._rs&&(e.oX+=(e.fX-e.oX)/8,e.oY+=(e.fY-e.oY)/8,e.cFlag._nd=!1,e._recent="reset",e._onfocus=e._dragging=!1),e.zoom_single&&e._recent!=="reset"?e._onfocus?e._sc+=(e.rA-e._sc)/e.reduction:e._sc=e.rA:e._sc+=(e.rA-e._sc)/(e.ani_smooth/(e._onfocus?e.reduction:1)),e._w=e._sc*e.iW,e._h=e._sc*e.iH,e._dragging&&(e.tX=e.dX,e.tY=e.dY,e.changeOffset(!0,!0)),e._recent=="zoomIn"?(e._w>e.rA*e.iW-t&&!e.zoom_single?(e.cFlag._nd&&(e.ani_end=!0),e._sc=e.rA):e._w>e.zoom_max*e.iW-t&&e.zoom_single&&(e.cFlag._nd&&(e.ani_end=!0),e._sc=e.rA=e.zoom_max),e.ani_end&&(e._w=e._sc*e.iW,e._h=e._sc*e.iH)):e._recent=="zoomOut"&&(e._w<e.rA*e.iW+t&&!e.zoom_single?(e.cFlag._nd&&(e.ani_end=!0),e._sc=e.rA):e._w<e.rF*e.iW+t&&e.zoom_single&&(e.cFlag._nd&&(e.ani_end=!0),e._sc=e.rA=e.rF),e.ani_end&&(e._w=e._sc*e.iW,e._h=e._sc*e.iH)),e.limitX=(e._w-e.sW)/(e._w/e.sW)/2,e.limitY=(e._h-e.sH)/(e._h/e.sH)/2,e._dragging||(e.pan_limit?(e.oX<-e.limitX-e.focusOffX&&(e.oX=-e.limitX-e.focusOffX),e.oX>e.limitX-e.focusOffX&&(e.oX=e.limitX-e.focusOffX),e._w<e.sW&&(e.tX=(e.sW-e._w)/2,e.changeOffset(!0,!1)),e.oY<-e.limitY-e.focusOffY&&(e.oY=-e.limitY-e.focusOffY),e.oY>e.limitY-e.focusOffY&&(e.oY=e.limitY-e.focusOffY),e._h<e.sH&&(e.tY=(e.sH-e._h)/2,e.changeOffset(!1,!0))):(e.oX<-e.limitX-e.focusOffX/e._w*e.sW-e.sW/2/(e._w/e.sW)&&(e.oX=-e.limitX-e.focusOffX/e._w*e.sW-e.sW/2/(e._w/e.sW)),e.oX>e.limitX-e.focusOffX/e._w*e.sW+e.sW/2/(e._w/e.sW)&&(e.oX=e.limitX-e.focusOffX/e._w*e.sW+e.sW/2/(e._w/e.sW)),e.oY<-e.limitY-e.focusOffY/e._h*e.sH-e.sH/(e._h/e.sH*2)&&(e.oY=-e.limitY-e.focusOffY/e._h*e.sH-e.sH/(e._h/e.sH*2)),e.oY>e.limitY-e.focusOffY/e._h*e.sH+e.sH/(e._h/e.sH*2)&&(e.oY=e.limitY-e.focusOffY/e._h*e.sH+e.sH/(e._h/e.sH*2)))),!e._dragging&&e._recent!="drag"&&(e.tX=(e.sW-e._w)/2+e.focusOffX+e.oX*(e._w/e.sW),e.tY=(e.sH-e._h)/2+e.focusOffY+e.oY*(e._h/e.sH),e.ani_smooth===1&&(e.cFlag._nd=!0,e.ani_end=!0)),e._recent=="zoomIn"||e._recent=="zoomOut"||e.cFlag._rs?(e._x=e.tX,e._y=e.tY):(e._x+=(e.tX-e._x)/(e.ani_smooth/(e._onfocus?e.reduction:1)),e._y+=(e.tY-e._y)/(e.ani_smooth/(e._onfocus?e.reduction:1)));if(e._recent=="left"){if(e._x<e.tX+t||e.ani_smooth===1)e.cFlag._nd?e.ani_end=!0:"",e._recent="",e._x=e.tX}else if(e._recent=="right"){if(e._x>e.tX-t||e.ani_smooth===1)e.cFlag._nd?e.ani_end=!0:"",e._recent="",e._x=e.tX}else if(e._recent=="up"){if(e._y<e.tY+t||e.ani_smooth===1)e.cFlag._nd?e.ani_end=!0:"",e._recent="",e._y=e.tY}else if(e._recent=="down"){if(e._y>e.tY-t||e.ani_smooth===1)e.cFlag._nd?e.ani_end=!0:"",e._recent="",e._y=e.tY}else e._recent=="drag"&&(e._x+t>=e.tX&&e._x-t<=e.tX&&e._y+t>=e.tY&&e._y-t<=e.tY||e.ani_smooth===1)&&(e._onfocus&&(e._dragging=!1),e.cFlag._nd?e.ani_end=!0:"",e._recent="",e._x=e.tX,e._y=e.tY);e.cFlag._rs&&e._w+t>=e.rA*e.iW&&e._w-t<=e.rA*e.iW&&e.oX<=e.fX+t&&e.oX>=e.fX-t&&e.oY<=e.fY+t&&e.oY>=e.fY-t&&(e.ani_end=!0,e._recent="",e.cFlag._rs=!1,e.cFlag._nd=!0,e._x=e.tX,e._y=e.tY,e._sc=e.rA,e._w=e._sc*e.iW,e._h=e._sc*e.iH);if(e.rA==e.rF&&e.iW*e.rA<=e.sW&&e.iH*e.rA<=e.sH){if(e.buttons[1].$ob.css("opacity")>.5&&e.rA>=e.rF&&(e.init_zoom==""||e.rA<e.init_zoom)&&(e.zoom_min==""||e.rA<e.zoom_min)){e.pan_limit&&e._moveCursor&&!e._moveCursor&&(e.$image.css("cursor","default"),e.$hitArea.css("cursor","default"));for(var n=1;n<(e.pan_limit&&!e._moveCursor?e.buttons_total:2);n++)e.buttons[n].$ob.css({opacity:.4}),e._wheel=!1,e.$holder.find("#"+e.buttons[n]._var+"norm").show(),e.$holder.find("#"+e.buttons[n]._var+"over").hide()}}else if(e.buttons[1].$ob.css("opacity")<.5){e._moveCursor&&e.mouse_drag&&(e.$image.css("cursor","move"),e.$hitArea.css("cursor","move"));for(var n=1;n<e.buttons_total;n++)e.buttons[n].$ob.css("opacity",.7)}e.rA==e.zoom_max?e.buttons[0].$ob.css("opacity")>.5&&(e.buttons[0].$ob.css("opacity",.4),e._wheel=!1,e.$holder.find("#"+e.buttons[0]._var+"norm").show(),e.$holder.find("#"+e.buttons[0]._var+"over").hide()):e.buttons[0].$ob.css("opacity")<.5&&e.buttons[0].$ob.css("opacity",.7),u?e.$image.css(u,"translate("+e._x.toFixed(14)+"px,"+e._y.toFixed(14)+"px) scale("+e._sc+")"):e.$image.css({left:e._x,top:e._y,width:e._w,height:e._h}),e.$loc_cont&&e.updateLocations(e._x,e._y,e._sc,e.locations),!u&&e.map_coordinates.length>0&&e.updateMap(),e.ani_end&&!e._dragging&&e._recent!="drag"?(e._playing=!1,e._recent="",e.cX=(-e._x+e.sW/2)/e.rA,e.cY=(-e._y+e.sH/2)/e.rA,e.onUPDATE&&e.onUPDATE(e.getZoomData(),!1),e.onZOOM_PAN&&e.onZOOM_PAN(e.getZoomData()),clearTimeout(e.ani_timer)):(e._playing=!0,e.onUPDATE&&e.onUPDATE(e.getZoomData(),!0),e.ani_timer=setTimeout(function(){e.Animate()},28))},updateLocations:function(t,n,r,i){this.onLANDMARK!==""&&(r>=this.show_at_zoom?this._landmark||(this._landmark=!0,this.onLANDMARK(!0)):this._landmark&&(this._landmark=!1,this.onLANDMARK(!1)));for(var s=0;s<i.length;s++){var o,a,f=i[s].x*r+t,l=i[s].y*r+n;r>=i[s].showAt?(i[s].scale&&u?(o=i[s].w2pad*this._sc,a=i[s].h2*this._sc):(o=i[s].w2pad,a=i[s].h2),f>-o&&f<this.sW+o&&(l>-a&&l<this.sH+a&&i[s].lab||l>0&&l<this.sH+a*2&&!i[s].lab)?i[s].vis||(i[s].vis=!0,u?i[s].ob.stop().css("display","block").animate({opacity:1},300):i[s].ob.show()):i[s].vis&&(i[s].vis=!1,u?i[s].ob.stop().animate({opacity:0},200,function(){e(this).hide()}):i[s].ob.hide())):i[s].vis&&(i[s].vis=!1,u?i[s].ob.stop().animate({opacity:0},200,function(){e(this).hide()}):i[s].ob.hide());if(f!==i[s].lpx||l!==i[s].lpy&&i[s].vis)u?i[s].ob.css(u,"translate("+f.toFixed(14)+"px,"+l.toFixed(14)+"px)"+(i[s].scale?" scale("+this._sc+")":"")):i[s].ob.css({left:f,top:l});i[s].lpx=f,i[s].lpy=l}},roundBG:function(t,n,r,i,s,o,u,a,f,l){var c=25;t.append(e('<div class="bgi'+n+'" style="background-position:'+ -(o-s)+"px "+(-(c-s)-l)+'px"></div>				<div class="bgh'+n+'"></div>				<div class="bgi'+n+'" style="background-position:'+ -o+"px "+(-(c-s)-l)+"px; left:"+(r-s)+'px"></div>				<div class="bgi'+n+'" style="background-position:'+ -(o-s)+"px "+(-c-l)+"px; top:"+(i-s)+'px"></div>				<div class="bgh'+n+'" style = "top:'+(i-s)+"px; left:"+s+'px"></div>				<div class="bgi'+n+'" style="background-position:'+ -o+"px "+(-c-l)+"px; top:"+(i-s)+"px; left:"+(r-s)+'px"></div>				<div class="bgc'+n+'"></div>')),e(".bgi"+n).css({position:"absolute",width:s,height:s,"background-image":"url("+a+")","background-repeat":"no-repeat","-ms-filter":"progid:DXImageTransform.Microsoft.gradient(startColorstr=#00FFFFFF,endColorstr=#00FFFFFF)",filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#00FFFFFF,endColorstr=#00FFFFFF)",zoom:1}),e(".bgh"+n).css({position:"absolute",width:r-s*2,height:s,"background-color":u,left:s}),e(".bgc"+n).css({position:"absolute",width:r,height:i-s*2,"background-color":u,top:s,left:0})},changeOffset:function(e,t){e&&(this.oX=(this.tX-(this.sW-this._w)/2-this.focusOffX)/(this._w/this.sW)),t&&(this.oY=(this.tY-(this.sH-this._h)/2-this.focusOffY)/(this._h/this.sH))},updateMap:function(){var t=this,n=0;t.mapAreas.each(function(){var r=[];for(var i=0;i<t.map_coordinates[n].length;i++)r[i]=t.map_coordinates[n][i]*t._sc;r=r.join(","),e(this).attr("coords",r),n++})},haltAnimation:function(){clearTimeout(this.ani_timer),this._playing=!1,this._recent=""},destroy:function(){var r=this;if(r.assetsLoaded){r.haltAnimation();for(prop in r.orig_style)r.orig_style[prop][0]!==!1&&r.orig_style[prop][0]!==undefined&&(r.orig_style[prop][0]==="width"||r.orig_style[prop][0]==="height"?parseInt(r.orig_style[prop][1])!==0&&r.$image.css(r.orig_style[prop][0],r.orig_style[prop][1]):r.$image.css(r.orig_style[prop][0],r.orig_style[prop][1]));clearTimeout(r.auto_timer),e(n).unbind(".sz"+r.id),e(t).unbind(".sz"+r.id),r.$holder.unbind(".sz"),r.$controls=undefined}else r.$image.show();r.container==""?r.image_url==""?(r.$image.insertBefore(r.$holder),r.$holder!==undefined&&r.$holder.remove()):(r.$elem.empty(),r.$loc_cont[0]&&r.$elem.append(r.loc_clone)):(r.$image.insertBefore(r.$holder),r.$holder.empty(),r.$image.wrap(r.$holder),r.$loc_cont[0]&&r.$holder.append(r.loc_clone)),r.$elem.removeData("smoothZoom"),r.$holder=undefined,r.Buttons=undefined,r.op=undefined,r.$image=undefined},focusTo:function(e){var t=this;t.assetsLoaded&&(e.zoom===undefined||e.zoom===""||e.zoom==0?e.zoom=t.rA:e.zoom/=100,t._onfocus=!0,e.zoom>t.rA&&t.rA!=t.zoom_max?(t.rA=e.zoom,t.rA=t.rA>t.zoom_max?t.zoom_max:t.rA):e.zoom<t.rA&&t.rA!=t.rF&&(t.rA=e.zoom,t.rA=t.rA<t.rF?t.rF:t.rA),t.transOffX=t.transOffY=0,t.setDraggedPos(e.x===undefined||e.x===""?"":-e.x*t.rA+t.sW/2,e.y===undefined||e.y===""?"":-e.y*t.rA+t.sH/2,t.rA),t.reduction=e.speed?e.speed/10:t.focusSpeed,t._recent="drag",t._dragging=!0,t._playing||t.Animate())},zoomIn:function(e){this.buttons[0].$ob.trigger(this.event_down,{id:0})},zoomOut:function(e){this.buttons[1].$ob.trigger(this.event_down,{id:1})},moveRight:function(e){this.buttons[2].$ob.trigger(this.event_down,{id:2})},moveLeft:function(e){this.buttons[3].$ob.trigger(this.event_down,{id:3})},moveUp:function(e){this.buttons[4].$ob.trigger(this.event_down,{id:4})},moveDown:function(e){this.buttons[5].$ob.trigger(this.event_down,{id:5})},Reset:function(e){this.buttons[6].$ob.trigger(this.event_down,{id:6})},getZoomData:function(e){return{normX:(-this._x/this.rA).toFixed(14),normY:(-this._y/this.rA).toFixed(14),normWidth:this.iW,normHeight:this.iH,scaledX:-this._x.toFixed(14),scaledY:-this._y.toFixed(14),scaledWidth:this._w,scaledHeight:this._h,centerX:(-this._x.toFixed(14)+this.sW/2)/this.rA,centerY:(-this._y.toFixed(14)+this.sH/2)/this.rA,ratio:this.rA}},addLandmark:function(t){if(this.$loc_cont){var n=t.length;for(var r=0;r<n;r++){var i=e(t[r]);this.$loc_cont.append(i),this.setLocation(i)}n>0&&this.updateLocations(this._x,this._y,this._sc,this.locations)}},attachLandmark:function(t){if(this.$loc_cont){var n=t.length;for(var r=0;r<n;r++)this.setLocation(t[r]instanceof jQuery?t[r]:e("#"+t[r]));n>0&&this.updateLocations(this._x,this._y,this._sc,this.locations)}},removeLandmark:function(e){if(this.$loc_cont){if(e){var t=e.length;for(var n=0;n<t;n++)for(var r=0;r<this.locations.length;r++)if(e[n]instanceof jQuery&&this.locations[r].ob[0]==e[n][0]||!(e[n]instanceof jQuery)&&this.locations[r].ob.attr("id")==e[n])this.locations[r].ob.remove(),this.locations.splice(r,1),r--}else this.locations.length>0&&(this.locations[this.locations.length-1].ob.remove(),this.locations.pop());t>0&&this.updateLocations(this._x,this._y,this._sc,this.locations)}},refreshAllLandmarks:function(){var t=this,n=t.$loc_cont.children(".item");t.show_at_zoom=parseInt(t.$loc_cont.data("show-at-zoom"),10)/100,t.allow_scale=s(t.$loc_cont.data("allow-scale")),t.allow_drag=s(t.$loc_cont.data("allow-drag"));for(var r=0;r<t.locations.length;r++){var i=!1;n.each(function(){t.locations[r].ob[0]==e(this)[0]&&(i=!0)}),i||(t.locations.splice(r,1),r--)}n.each(function(){var n=!1;for(var r=0;r<t.locations.length;r++)if(t.locations[r].ob[0]==e(this)[0]){n=!0;break}n||t.setLocation(e(this))}),this.updateLocations(this._x,this._y,this._sc,this.locations)},resize:function(e){var t;if(e.data){e.preventDefault(),t=e.data.self;var n=t.$holder.parent().width(),r=t.$holder.parent().height();t.oW&&(n=Math.min(n,t.oW)),t.sW=n,t.oH?t.oW&&t.maintain_ratio&&(t.sH=n/(t.oW/t.oH)):t.sH=r}else t=this,e.width&&(t.sW=e.width),e.height&&(t.sH=e.height),e.max_WIDTH&&(t.w_max=e.max_WIDTH),e.max_HEIGHT&&(t.h_max=e.max_HEIGHT);t.w_max!==0&&t.w_max!==""&&(t.sW=Math.min(t.sW,t.w_max)),t.h_max!==0&&t.h_max!==""&&(t.sH=Math.min(t.sH,t.h_max)),t.$holder.css({width:t.sW,height:t.sH}),t.bord_size>0&&(t.border[0].height(t.sH),t.border[1].css({height:t.sH,left:t.sW-t.bord_size}),t.border[2].width(t.sW-t.bord_size*2),t.border[3].css({width:t.sW-t.bord_size*2,top:t.sH-t.bord_size})),t.bu_align[1]=="center"&&t.$controls.css("left",parseInt((t.sW-t.cBW)/2)),t.bu_align[0]=="center"&&t.$controls.css("top",parseInt((t.sH-t.cBH)/2)),t.zoom_min==0&&(t.rF=t.checkRatio(t.sW,t.sH,t.iW,t.iH,t.zoom_fit),t.rA<t.rF&&(t.rA=t.rF)),t.focusTo({x:t.cX,y:t.cY,zoom:"",speed:10})}},e.fn.z=function(t){var n=this,r=n.length;for(var s=0;s<r;s++){var o=e(n[s]),u=o.data("smoothZoom");if(!u)(typeof t=="object"||!t)&&o.data("smoothZoom",new i(o,t));else{if(t=="getZoomData")return u[t].apply(u,Array.prototype.slice.call(arguments,1));u[t]&&u[t].apply(u,Array.prototype.slice.call(arguments,1))}}if(t!=="getZoomData")return this};var o=function(e,t,n){function r(e){v.cssText=e}function i(e,t){return r(y.join(e+";")+(t||""))}function s(e,t){return typeof e===t}function o(e,t){return!!~(""+e).indexOf(t)}function u(e,t){for(var r in e)if(v[e[r]]!==n)return t=="pfx"?e[r]:!0;return!1}function a(e,t,r){for(var i in e){var o=t[e[i]];if(o!==n)return r===!1?e[i]:s(o,"function")?o.bind(r||t):o}return!1}function f(e,t,n){var r=e.charAt(0).toUpperCase()+e.substr(1),i=(e+" "+w.join(r+" ")+r).split(" ");return s(t,"string")||s(t,"undefined")?u(i,t):(i=(e+" "+E.join(r+" ")+r).split(" "),a(i,t,n))}var l="2.5.3",c={},h=t.documentElement,p="modernizr",d=t.createElement(p),v=d.style,m,g={}.toString,y=" -webkit- -moz- -o- -ms- ".split(" "),b="Webkit Moz O ms",w=b.split(" "),E=b.toLowerCase().split(" "),S={},x={},T={},N=[],C=N.slice,k,L=function(e,n,r,i){var s,o,u,a=t.createElement("div"),f=t.body,l=f?f:t.createElement("body");if(parseInt(r,10))while(r--)u=t.createElement("div"),u.id=i?i[r]:p+(r+1),a.appendChild(u);return s=["&#173;","<style>",e,"</style>"].join(""),a.id=p,(f?a:l).innerHTML+=s,l.appendChild(a),f||(l.style.background="",h.appendChild(l)),o=n(a,e),f?a.parentNode.removeChild(a):l.parentNode.removeChild(l),!!o},A={}.hasOwnProperty,O;!s(A,"undefined")&&!s(A.call,"undefined")?O=function(e,t){return A.call(e,t)}:O=function(e,t){return t in e&&s(e.constructor.prototype[t],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if(typeof t!="function")throw new TypeError;var n=C.call(arguments,1),r=function(){if(this instanceof r){var i=function(){};i.prototype=t.prototype;var s=new i,o=t.apply(s,n.concat(C.call(arguments)));return Object(o)===o?o:s}return t.apply(e,n.concat(C.call(arguments)))};return r});var M=function(n,r){var i=n.join(""),s=r.length;L(i,function(n,r){var i=t.styleSheets[t.styleSheets.length-1],o=i?i.cssRules&&i.cssRules[0]?i.cssRules[0].cssText:i.cssText||"":"",u=n.childNodes,a={};while(s--)a[u[s].id]=u[s];c.touch="ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch||(a.touch&&a.touch.offsetTop)===9,c.csstransforms3d=(a.csstransforms3d&&a.csstransforms3d.offsetLeft)===9&&a.csstransforms3d.offsetHeight===3},s,r)}([,["@media (",y.join("touch-enabled),("),p,")","{#touch{top:9px;position:absolute}}"].join(""),["@media (",y.join("transform-3d),("),p,")","{#csstransforms3d{left:9px;position:absolute;height:3px;}}"].join("")],[,"touch","csstransforms3d"]);S.touch=function(){return c.touch},S.borderradius=function(){return f("borderRadius")},S.csstransforms=function(){return!!f("transform")},S.csstransforms3d=function(){var e=!!f("perspective");return e&&"webkitPerspective"in h.style&&(e=c.csstransforms3d),e};for(var _ in S)O(S,_)&&(k=_.toLowerCase(),c[k]=S[_](),N.push((c[k]?"":"no-")+k));return r(""),d=m=null,c._version=l,c._prefixes=y,c._domPrefixes=E,c._cssomPrefixes=w,c.testProp=function(e){return u([e])},c.testAllProps=f,c.testStyles=L,c.prefixed=function(e,t,n){return t?f(e,t,n):f(e,"pfx")},c}(this,this.document),u=o.prefixed("transform"),a=o.prefixed("transformOrigin"),f=o.prefixed("borderRadius"),l=o.csstransforms3d,c=o.touch})(jQuery,window,document),function(e){function t(t){var n=t||window.event,r=[].slice.call(arguments,1),i=0,s=!0,o=0,u=0;return t=e.event.fix(n),t.type="mousewheel",n.wheelDelta&&(i=n.wheelDelta/120),n.detail&&(i=-n.detail/3),u=i,n.axis!==undefined&&n.axis===n.HORIZONTAL_AXIS&&(u=0,o=-1*i),n.wheelDeltaY!==undefined&&(u=n.wheelDeltaY/120),n.wheelDeltaX!==undefined&&(o=-1*n.wheelDeltaX/120),r.unshift(t,i,o,u),(e.event.dispatch||e.event.handle).apply(this,r)}var n=["DOMMouseScroll","mousewheel"];if(e.event.fixHooks)for(var r=n.length;r;)e.event.fixHooks[n[--r]]=e.event.mouseHooks;e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=n.length;e;)this.addEventListener(n[--e],t,!1);else this.onmousewheel=t},teardown:function(){if(this.remove_eventListener)for(var e=n.length;e;)this.remove_eventListener(n[--e],t,!1);else this.onmousewheel=null}},e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}(jQuery);var ani_smooth,zoom_speed,pan_speed;jQuery(function(e){var t=e(document),n=e("#cont"),r=e("#settings");r.addClass("noSel");var i=e("#barSmooth").css({left:smPos+"px"}),s=e("#barSmooth_t").css({left:smPos-3+"px","-moz-user-select":"none","-khtml-user-select":"none","-webkit-user-select":"none","user-select":"none",cursor:"default"}).addClass("noSel").hide(),o=!1;i.bind("mouseover",function(e){i.css("background-position","-1025px 0px"),f||s.show()}).bind("mouseout",function(e){o||(i.css("background-position","-1011px 0px"),s.hide())}).bind("mousedown",function(n){o=!0,s.show(),i.css("background-position","-1025px 0px"),offX=n.pageX-r.offset().left-i.position().left,t.bind("mousemove.preview",function(e){var t=e.pageX-r.offset().left-offX;t<112?t=108:"",t>194?t=198:"",t>148&&t<158?t=153:"",i.css({left:t+"px"}),s.css({left:t-3+"px"});var n=setSmooth(i.position().left);return setLable(s,n),!1});var u=setSmooth(i.position().left);setLable(s,u),n.stopPropagation(),e.browser.msie||n.preventDefault()}).addClass("noSel"),i.bind("touchstart.preview",function(e){e.preventDefault(),offX=e.originalEvent.changedTouches[0].pageX-r.offset().left-i.position().left,o=!0;var t=setSmooth(i.position().left);setLable(s,t),i.css("background-position","-1025px 0px"),s.show()});var u=e("#barSpeed").css({left:spPos+"px"}),a=e("#barSpeed_t").css({left:spPos-3+"px","-moz-user-select":"none","-khtml-user-select":"none","-webkit-user-select":"none","user-select":"none",cursor:"default"}).addClass("noSel").hide(),f=!1;u.bind("mouseover",function(e){u.css("background-position","-1025px 0px"),o||a.show()}).bind("mouseout",function(e){f||(u.css("background-position","-1011px 0px"),a.hide())}).bind("mousedown",function(n){f=!0,a.show(),u.css("background-position","-1025px 0px"),offX=n.pageX-r.offset().left-u.position().left,t.bind("mousemove.preview",function(e){var t=e.pageX-r.offset().left-offX;t<112?t=108:"",t>194?t=198:"",t>148&&t<158?t=153:"",u.css({left:t+"px"}),a.css({left:t-3+"px"});var n=setSpeed(u.position().left);return setLable(a,n),!1});var i=setSpeed(u.position().left);setLable(a,i),n.stopPropagation(),e.browser.msie||n.preventDefault()}).addClass("noSel"),u.bind("touchstart.preview",function(e){e.preventDefault(),offX=e.originalEvent.changedTouches[0].pageX-r.offset().left-u.position().left,f=!0;var t=setSmooth(u.position().left);setLable(a,t),u.css("background-position","-1011px 0px"),a.show()}),t.bind("mouseup.preview",function(e){if(o){o=!1,s.hide(),t.unbind("mousemove.preview");var n=e.pageX-r.offset().left-offX;n<112?n=108:"",n>194?n=198:"",n>148&&n<158?n=153:"",i.css({left:n+"px"}),s.css({left:n-3+"px"}),l=setSmooth(i.position().left),setLable(s,l),i.css("background-position","-1011px 0px")}if(f){f=!1,a.hide(),t.unbind("mousemove.preview");var n=e.pageX-r.offset().left-offX;n<112?n=108:"",n>194?n=198:"",n>148&&n<158?n=153:"",u.css({left:n+"px"}),a.css({left:n-3+"px"});var l=setSpeed(u.position().left);setLable(a,l),u.css("background-position","-1011px 0px")}}),n.bind("touchmove.preview",function(e){e.preventDefault();if(o){var t=e.originalEvent.changedTouches[0].pageX-r.offset().left-offX;t<112?t=108:"",t>194?t=198:"",t>148&&t<158?t=153:"",i.css({left:t+"px"}),s.css({left:t-3+"px"});var n=setSmooth(i.position().left);setLable(s,n)}if(f){var t=e.originalEvent.changedTouches[0].pageX-r.offset().left-offX;t<112?t=108:"",t>194?t=198:"",t>148&&t<158?t=153:"",u.css({left:t+"px"}),a.css({left:t-3+"px"});var n=setSpeed(u.position().left);setLable(a,n)}}),n.bind("touchend.preview",function(e){e.preventDefault(),o&&(o=!1,s.hide(),setSmooth((i.position().left-108)/100*10),i.css("background-position","-1011px 0px")),f&&(f=!1,a.hide(),setSpeed((u.position().left-108)/100*10),u.css("background-position","-1011px 0px"))}),e("#cont").addClass("noSel"),e(".noSel").each(function(){this.onselectstart=function(){return!1}}),e("#s"+sample).css({"background-position":(sample-1)*-111+"px -44px",cursor:"pointer"}),e("#s1").bind("mouseover",function(t){sample!==1&&e(this).css({"background-position":"0px -22px",cursor:"pointer"})}).bind("mouseout",function(t){sample!==1&&e(this).css({"background-position":"0px 0px",cursor:"default"})}).bind("click",function(t){sample!==1&&(e(this).css("background-position","0px -44px"),e("#s2").css("background-position","-111px 0px"),e("#s3").css("background-position","-222px 0px"),e("#s4").css("background-position","-333px 0px"),e("#s5").css("background-position","-444px 0px"),e("#s6").css("background-position","-555px 0px"),e("#s7").css("background-position","-666px 0px"),sample=1)}),e("#s2").bind("mouseover",function(t){sample!==2&&e(this).css({"background-position":"-111px -22px",cursor:"pointer"})}).bind("mouseout",function(t){sample!==2&&e(this).css({"background-position":"-111px 0px",cursor:"default"})}).bind("click",function(t){sample!==2&&(e(this).css("background-position","-111px -44px"),e("#s1").css("background-position","0px 0px"),e("#s3").css("background-position","-222px 0px"),e("#s4").css("background-position","-333px 0px"),e("#s5").css("background-position","-444px 0px"),e("#s6").css("background-position","-555px 0px"),e("#s7").css("background-position","-666px 0px"),sample=2)}),e("#s3").bind("mouseover",function(t){sample!==3&&e(this).css({"background-position":"-222px -22px",cursor:"pointer"})}).bind("mouseout",function(t){sample!==3&&e(this).css({"background-position":"-222px 0px",cursor:"default"})}).bind("click",function(t){sample!==3&&(e(this).css("background-position","-222px -44px"),e("#s1").css("background-position","0px 0px"),e("#s2").css("background-position","-111px 0px"),e("#s4").css("background-position","-333px 0px"),e("#s5").css("background-position","-444px 0px"),e("#s6").css("background-position","-555px 0px"),e("#s7").css("background-position","-666px 0px"),sample=3)}),e("#s4").bind("mouseover",function(t){sample!==4&&e(this).css({"background-position":"-333px -22px",cursor:"pointer"})}).bind("mouseout",function(t){sample!==4&&e(this).css({"background-position":"-333px 0px",cursor:"default"})}).bind("click",function(t){sample!==4&&(e(this).css("background-position","-333px -44px"),e("#s1").css("background-position","0px 0px"),e("#s2").css("background-position","-111px 0px"),e("#s3").css("background-position","-222px 0px"),e("#s5").css("background-position","-444px 0px"),e("#s6").css("background-position","-555px 0px"),e("#s7").css("background-position","-666px 0px"),sample=4)}),e("#s5").bind("mouseover",function(t){sample!==5&&e(this).css({"background-position":"-444px -22px",cursor:"pointer"})}).bind("mouseout",function(t){sample!==5&&e(this).css({"background-position":"-444px 0px",cursor:"default"})}).bind("click",function(t){sample!==5&&(e(this).css("background-position","-444px -44px"),e("#s1").css("background-position","0px 0px"),e("#s2").css("background-position","-111px 0px"),e("#s3").css("background-position","-222px 0px"),e("#s4").css("background-position","-333px 0px"),e("#s6").css("background-position","-555px 0px"),e("#s7").css("background-position","-666px 0px"),sample=5)}),e("#s6").bind("mouseover",function(t){sample!==6&&e(this).css({"background-position":"-555px -22px",cursor:"pointer"})}).bind("mouseout",function(t){sample!==6&&e(this).css({"background-position":"-555px 0px",cursor:"default"})}).bind("click",function(t){sample!==6&&(e(this).css("background-position","-555px -44px"),e("#s1").css("background-position","0px 0px"),e("#s2").css("background-position","-111px 0px"),e("#s3").css("background-position","-222px 0px"),e("#s4").css("background-position","-333px 0px"),e("#s5").css("background-position","-444px 0px"),e("#s7").css("background-position","-666px 0px"),sample=6)}),e("#s7").bind("mouseover",function(t){sample!==7&&e(this).css({"background-position":"-666px -22px",cursor:"pointer"})}).bind("mouseout",function(t){sample!==7&&e(this).css({"background-position":"-666px 0px",cursor:"default"})}).bind("click",function(t){sample!==7&&(e(this).css("background-position","-666px -44px"),e("#s1").css("background-position","0px 0px"),e("#s2").css("background-position","-111px 0px"),e("#s3").css("background-position","-222px 0px"),e("#s4").css("background-position","-333px 0px"),e("#s5").css("background-position","-444px 0px"),e("#s6").css("background-position","-555px 0px"),sample=7)})});