define(["underscore","backbone","models/global","collections/global"],function(e,t,n,r){var i=t.Collection.extend({globalModel:null,journalObj:null,currentIssueObj:null,servicesCounter:0,items:[],initialize:function(){this.globalModel=new n},parse:function(e){var n;if(this.servicesCounter!=0)return this.servicesCounter==1?(currentIssueObj=new Object,currentIssueObj.CoverURL=$(e).find("CoverURL").text(),currentIssueObj.IssueAccessionNumber=$(e).find("IssueAccessionNumber").text(),currentIssueObj.IssueCitiationText=$(e).find("IssueCitiationText").text(),journalObj.currentIssueObj=currentIssueObj,this.items.push(journalObj),this.items):!1;journalObj=new Object,journalObj.Title=$(e).find("Title").text(),journalObj.Description=$(e).find("Description").text(),journalObj.currentIssueObj=null,n,n||(n={}),n.dataType="xml",n.url=this.globalModel.current_issue_by_shortname,t.Collection.prototype.fetch.call(this,n),this.servicesCounter++},fetch:function(e){e||(e={}),e.dataType="xml",e.url=this.globalModel.journal_by_shortname,t.Collection.prototype.fetch.call(this,e)}});return i});